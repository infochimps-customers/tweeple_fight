%h1 Which more popular is? Twitter judging! Fight!

.section
  - form_tag '/', :method => :get do
    %fieldset
      %legend Tweeple Fight
      - labeled_field @fight, :topic_a
      - labeled_field @fight, :topic_b

      .buttons
        - submit_button 'Fight!', :class => 'positive'

%hr/

.results
  %p.description.quiet
    Using the <a href="http://infochimps.com/apis">Infochimps API</a>, we
    searched 100 million+ twitter profiles to find which is more popular,
    == &ldquo;#{@fight.topic_a}&rdquo; or &ldquo;#{@fight.topic_b}&rdquo;
    
  - if @fight && @fight.success?
    .total.total_a
      %span.res_color= @fight.topic_a
    .total.total_b
      %span.res_color= @fight.topic_b
    
    .total.total_a
      %span.res_color= @fight.number_hits[0]
      hits
    .total.total_b
      %span.res_color= @fight.number_hits[1]
      hits

    .total.total_a
      %span.res_color= @fight.micro_biebers[0]
      µBb
    .total.total_b
      %span.res_color= @fight.micro_biebers[1]
      µBb

    
    .total.total_a.bieber_meter
      .meter{ :style => "width:#{ 400 * [@fight.bieberosity[0]/100, 0].max }px" }
        %img{ :src => '/images/bieber-440.png', :alt => "#{@fight.bieberosity[0].round(1)} bieberosity", :title => "#{@fight.bieberosity[0].round(1)} bieberosity" }
    .total.total_b.bieber_meter
      .meter{ :style => "width:#{ 400 * [@fight.bieberosity[1]/100, 0].max }px" }
        %img{ :src => '/images/bieber-440.png', :alt => "#{@fight.bieberosity[1].round(1)} bieberosity", :title => "#{@fight.bieberosity[1].round(1)} bieberosity" }

    .winner{ :class => (['total_a', 'total_b'][@fight.winner_idx]) }
      %span.res_color= @fight.winner
      won!
  - else
    .middle_float.warning
      yikes! too much fighting, try again in a bit
    
  
%br.clear/          
%p.quiet.middle_float
  µBb (microBiebers) -- Each microBieber corresponds to one-millionth the popularity of Justin Bieber as a user profile term. For example, a 200 µBb term is used 0.0002 as often as 'Bieber' in people's profiles.


-# != partial :dump
